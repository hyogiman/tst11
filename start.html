<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ï∂îÎ¶¨ Í≤åÏûÑ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            position: relative;
            box-shadow: 0 0 20px rgba(0,0,0,0.3);
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header h1 {
            font-size: 1.8em;
            margin-bottom: 5px;
        }

        .header .subtitle {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .content {
            padding: 20px;
            padding-bottom: 100px;
        }

        .screen {
            display: none;
        }

        .screen.active {
            display: block;
        }

        /* Î°úÍ∑∏Ïù∏ ÌôîÎ©¥ */
        .login-form {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin-top: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            width: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* Ïó≠Ìï† Ïπ¥Îìú */
        .role-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .role-card.detective {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .role-card.criminal {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }

        .role-card.merchant {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            color: #333;
        }

        .role-title {
            font-size: 2em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .role-description {
            font-size: 1.1em;
            line-height: 1.5;
            margin-bottom: 15px;
        }

        .secret-code {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            border: 2px dashed rgba(255,255,255,0.5);
        }

        .secret-code-label {
            font-size: 0.9em;
            margin-bottom: 5px;
            opacity: 0.9;
        }

        .secret-code-value {
            font-size: 1.8em;
            font-weight: 700;
            letter-spacing: 3px;
            text-align: center;
        }

        /* ÏΩîÎìú ÏûÖÎ†• ÌôîÎ©¥ */
        .code-input-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .code-input-title {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }

        /* Í≤∞Í≥º Î™©Î°ù */
        .result-list {
            margin-top: 20px;
        }

        .result-item {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .result-item:hover {
            background: #f8f9fa;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .result-item-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .result-item-subtitle {
            font-size: 0.9em;
            color: #666;
        }

        .result-item-value {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-weight: 700;
            color: #27ae60;
        }

        /* Í≥µÍ≤© Î≤ÑÌäº */
        .attack-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            font-size: 0.9em;
            cursor: pointer;
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
        }

        .attack-btn:hover {
            background: #c0392b;
        }

        /* ÌïòÎã® ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 400px;
            background: white;
            border-top: 1px solid #e9ecef;
            display: flex;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        }

        .nav-item {
            flex: 1;
            padding: 15px 5px;
            text-align: center;
            cursor: pointer;
            transition: background-color 0.3s;
            border: none;
            background: none;
            font-size: 0.85em;
        }

        .nav-item:hover {
            background: #f8f9fa;
        }

        .nav-item.active {
            background: #667eea;
            color: white;
        }

        .nav-icon {
            font-size: 1.2em;
            margin-bottom: 3px;
            display: block;
        }

        /* ÏÉÅÌÉú Î©îÏãúÏßÄ */
        .status-message {
            background: #d4edda;
            color: #155724;
            padding: 12px;
            border-radius: 8px;
            margin: 15px 0;
            border: 1px solid #c3e6cb;
        }

        .status-message.error {
            background: #f8d7da;
            color: #721c24;
            border-color: #f5c6cb;
        }

        .status-message.warning {
            background: #fff3cd;
            color: #856404;
            border-color: #ffeaa7;
        }

        /* ÌÉÄÏù¥Î®∏ */
        .death-timer {
            background: #e74c3c;
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
            font-size: 1.2em;
            font-weight: 600;
        }

        /* Î∞òÏùëÌòï */
        @media (max-width: 480px) {
            .container {
                width: 100%;
                border-radius: 0;
            }
            
            .content {
                padding: 15px;
            }
            
            .nav-item {
                font-size: 0.75em;
            }
        }

        /* Î°úÎî© Ïï†ÎãàÎ©îÏù¥ÏÖò */
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üïµÔ∏è Ï∂îÎ¶¨ Í≤åÏûÑ</h1>
            <p class="subtitle">ÌÉêÏ†ï, Î≤îÏù∏, ÏÉÅÏù∏Ïùò Ïã¨Î¶¨Ï†Ñ</p>
        </div>

        <div class="content">
            <!-- Î°úÍ∑∏Ïù∏ ÌôîÎ©¥ -->
            <div class="screen active" id="loginScreen">
                <div class="login-form">
                    <h2 style="text-align: center; margin-bottom: 20px;">Í≤åÏûÑ Ï∞∏Í∞Ä</h2>
                    
                    <div class="form-group">
                        <label for="loginCode">Î°úÍ∑∏Ïù∏ ÏΩîÎìú</label>
                        <input type="text" id="loginCode" placeholder="ÏòÅÎ¨∏+Ïà´Ïûê 4ÏûêÎ¶¨ ÏûÖÎ†•" maxlength="4" style="text-transform: uppercase;">
                    </div>
                    
                    <div class="form-group">
                        <label for="playerName">ÏÑ±Î™Ö</label>
                        <input type="text" id="playerName" placeholder="Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî">
                    </div>
                    
                    <div class="form-group">
                        <label for="playerPosition">ÏßÅÏúÑ</label>
                        <input type="text" id="playerPosition" placeholder="ÏßÅÏúÑÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî">
                    </div>
                    
                    <button class="btn" onclick="login()">Í≤åÏûÑ ÏãúÏûë</button>
                </div>

                <div class="loading" id="loginLoading">
                    <div class="spinner"></div>
                    <p>Î°úÍ∑∏Ïù∏ Ï§ë...</p>
                </div>
            </div>

            <!-- Ìôà ÌôîÎ©¥ -->
            <div class="screen" id="homeScreen">
                <div id="roleCard" class="role-card">
                    <!-- Ïó≠Ìï† Ï†ïÎ≥¥Í∞Ä ÎèôÏ†ÅÏúºÎ°ú ÏÇΩÏûÖÎê©ÎãàÎã§ -->
                </div>
                
                <div class="status-message" id="gameStatus">
                    Í≤åÏûÑÏù¥ ÏßÑÌñâ Ï§ëÏûÖÎãàÎã§. Îã§Î•∏ ÌîåÎ†àÏù¥Ïñ¥Îì§Í≥º ÏÉÅÌò∏ÏûëÏö©ÌïòÎ©∞ Î™©ÌëúÎ•º Îã¨ÏÑ±ÌïòÏÑ∏Ïöî!
                </div>

                <div id="deathTimer" class="death-timer" style="display: none;">
                    ‚è∞ Í≤åÏûÑ Ï¢ÖÎ£åÍπåÏßÄ: <span id="timerDisplay">3:00</span>
                </div>
            </div>

            <!-- Ïó≠Ìï†/ÏãúÌÅ¨Î¶ø ÏΩîÎìú ÌôîÎ©¥ -->
            <div class="screen" id="roleScreen">
                <h2 style="margin-bottom: 20px;">ÎÇ¥ Ï†ïÎ≥¥</h2>
                
                <div class="code-input-section">
                    <div class="code-input-title">ÎÇ¥ Ïó≠Ìï†</div>
                    <div id="myRole" style="font-size: 1.2em; font-weight: 600; color: #667eea;">-</div>
                </div>

                <div class="code-input-section">
                    <div class="code-input-title">ÎÇòÏùò ÏãúÌÅ¨Î¶ø ÏΩîÎìú</div>
                    <div id="mySecretCode" style="font-size: 2em; font-weight: 700; text-align: center; letter-spacing: 3px; color: #e74c3c;">-</div>
                    <p style="font-size: 0.9em; color: #666; margin-top: 10px;">
                        ÏÉÅÌò∏ÏûëÏö© Í≤åÏûÑÏóêÏÑú Ïßà Í≤ΩÏö∞ ÏÉÅÎåÄÏóêÍ≤å Ïù¥ ÏΩîÎìúÎ•º Î≥¥Ïó¨Ï£ºÏÑ∏Ïöî.
                    </p>
                </div>
            </div>

            <!-- ÏΩîÎìú ÏûÖÎ†• ÌôîÎ©¥ -->
            <div class="screen" id="codeInputScreen">
                <h2 style="margin-bottom: 20px;">ÏãúÌÅ¨Î¶ø ÏΩîÎìú ÏûÖÎ†•</h2>
                
                <div class="code-input-section">
                    <div class="code-input-title">ÏÉÅÎåÄÎ∞©Ïùò ÏãúÌÅ¨Î¶ø ÏΩîÎìú</div>
                    <div class="form-group">
                        <input type="text" id="targetCode" placeholder="4ÏûêÎ¶¨ ÏΩîÎìú ÏûÖÎ†•" maxlength="4" style="text-transform: uppercase;">
                    </div>
                    <button class="btn" onclick="submitCode()">ÏΩîÎìú ÌôïÏù∏</button>
                </div>

                <div class="loading" id="codeLoading">
                    <div class="spinner"></div>
                    <p>ÏΩîÎìú Ï≤òÎ¶¨ Ï§ë...</p>
                </div>

                <div id="codeResult" style="margin-top: 20px;"></div>
            </div>

            <!-- Í≤∞Í≥º ÌôîÎ©¥ -->
            <div class="screen" id="resultScreen">
                <h2 style="margin-bottom: 20px;" id="resultTitle">ÎÇ¥ Í≤∞Í≥º</h2>
                
                <div id="resultContent">
                    <!-- Ïó≠Ìï†Î≥Ñ Í≤∞Í≥ºÍ∞Ä ÎèôÏ†ÅÏúºÎ°ú ÏÇΩÏûÖÎê©ÎãàÎã§ -->
                </div>
            </div>
        </div>

        <!-- ÌïòÎã® ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò -->
        <div class="bottom-nav" id="bottomNav" style="display: none;">
            <button class="nav-item active" onclick="showScreen('home')">
                <span class="nav-icon">üè†</span>
                Ìôà
            </button>
            <button class="nav-item" onclick="showScreen('role')">
                <span class="nav-icon">üë§</span>
                Ïó≠Ìï†/S.C
            </button>
            <button class="nav-item" onclick="showScreen('codeInput')">
                <span class="nav-icon">üî¢</span>
                ÏΩîÎìúÏûÖÎ†•
            </button>
            <button class="nav-item" onclick="showScreen('result')">
                <span class="nav-icon">üìä</span>
                Í≤∞Í≥º
            </button>
        </div>
    </div>

    <script>
        // Í≤åÏûÑ ÏÉÅÌÉú
        let gameState = {
            isLoggedIn: false,
            player: null,
            role: null,
            secretCode: null,
            results: [],
            isAlive: true,
            deathTimer: null
        };

        // Í∏∞Î≥∏ ÏãúÌÅ¨Î¶ø ÏΩîÎìú (Firebase Ïó∞Í≤∞ Ïã§Ìå® Ïãú Î∞±ÏóÖÏö©)
        const tempSecretCodes = {
            'detective': ['DT01', 'DT02', 'DT03'],
            'criminal': ['CR01', 'CR02', 'CR03'],
            'merchant': ['MC01', 'MC02', 'MC03']
        };

        // ÏãúÌÅ¨Î¶ø ÏΩîÎìú ÏÉùÏÑ± (Î∞±ÏóÖÏö©)
        function generateSecretCode(role) {
            const codes = tempSecretCodes[role];
            return codes[Math.floor(Math.random() * codes.length)];
        }

        // Ïó≠Ìï†Î≥Ñ ÏÑ§Î™Ö
        const roleDescriptions = {
            detective: {
                title: 'üîç ÌÉêÏ†ï',
                description: 'Î≤îÏù∏ÏùÑ Ï∞æÏïÑÎÇ¥Îäî Í≤ÉÏù¥ Î™©ÌëúÏûÖÎãàÎã§. Îã§Î•∏ ÌîåÎ†àÏù¥Ïñ¥Ïùò ÏãúÌÅ¨Î¶ø ÏΩîÎìúÎ•º ÏàòÏßëÌïòÏó¨ Îã®ÏÑúÎ•º Î™®ÏúºÏÑ∏Ïöî.',
                className: 'detective'
            },
            criminal: {
                title: 'üî™ Î≤îÏù∏',
                description: 'ÌÉêÏ†ïÏùÑ Ï∞æÏïÑ Ï†úÍ±∞ÌïòÎäî Í≤ÉÏù¥ Î™©ÌëúÏûÖÎãàÎã§. ÏµúÎåÄ 3Î™ÖÍπåÏßÄ Ï†úÍ±∞Ìï† Ïàò ÏûàÏúºÎ©∞, ÌÉêÏ†ïÏùÑ Ïö∞ÏÑ†Ï†ÅÏúºÎ°ú ÎÖ∏Î¶¨ÏÑ∏Ïöî.',
                className: 'criminal'
            },
            merchant: {
                title: 'üí∞ ÏÉÅÏù∏',
                description: 'ÎèàÏùÑ Î≤ÑÎäî Í≤ÉÏù¥ Î™©ÌëúÏûÖÎãàÎã§. Îã§Î•∏ ÌîåÎ†àÏù¥Ïñ¥ÏôÄ Í±∞ÎûòÌïòÏó¨ ÏµúÎåÄÌïú ÎßéÏùÄ ÎèàÏùÑ Î™®ÏúºÏÑ∏Ïöî.',
                className: 'merchant'
            }
        };

        // Î°úÍ∑∏Ïù∏ Ìï®Ïàò - Firebase Ïó∞Îèô
        async function login() {
            const loginCode = document.getElementById('loginCode').value.toUpperCase();
            const playerName = document.getElementById('playerName').value;
            const playerPosition = document.getElementById('playerPosition').value;

            if (!loginCode || !playerName || !playerPosition) {
                alert('Î™®Îì† Ï†ïÎ≥¥Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
                return;
            }

            // Î°úÎî© ÌëúÏãú
            document.getElementById('loginLoading').style.display = 'block';

            try {
                // FirebaseÏóêÏÑú Î°úÍ∑∏Ïù∏ ÏΩîÎìú Í≤ÄÏ¶ù
                const codeDoc = await db.collection('loginCodes').doc(loginCode).get();
                
                if (!codeDoc.exists) {
                    throw new Error('Ïú†Ìö®ÌïòÏßÄ ÏïäÏùÄ Î°úÍ∑∏Ïù∏ ÏΩîÎìúÏûÖÎãàÎã§.');
                }
                
                const codeData = codeDoc.data();
                if (codeData.used) {
                    throw new Error('Ïù¥ÎØ∏ ÏÇ¨Ïö©Îêú Î°úÍ∑∏Ïù∏ ÏΩîÎìúÏûÖÎãàÎã§.');
                }

                // ÏãúÌÅ¨Î¶ø ÏΩîÎìú ÏÉùÏÑ±
                const secretCode = await generateSecretCodeFromFirebase(codeData.role);

                // ÌîåÎ†àÏù¥Ïñ¥ Ï†ïÎ≥¥ FirebaseÏóê Ï†ÄÏû•
                const playerData = {
                    name: playerName,
                    position: playerPosition,
                    role: codeData.role,
                    secretCode: secretCode,
                    isAlive: true,
                    results: [],
                    killCount: 0,
                    money: 0,
                    loginTime: firebase.firestore.FieldValue.serverTimestamp()
                };

                await db.collection('players').doc(loginCode).set(playerData);

                // Î°úÍ∑∏Ïù∏ ÏΩîÎìú ÏÇ¨Ïö© ÌëúÏãú
                await db.collection('loginCodes').doc(loginCode).update({
                    used: true,
                    usedBy: playerName,
                    usedAt: firebase.firestore.FieldValue.serverTimestamp()
                });

                // Í≤åÏûÑ ÏÉÅÌÉú ÏÑ§Ï†ï
                gameState.player = {
                    name: playerName,
                    position: playerPosition,
                    loginCode: loginCode
                };
                gameState.role = codeData.role;
                gameState.secretCode = secretCode;
                gameState.isLoggedIn = true;

                // Ìôà ÌôîÎ©¥ÏúºÎ°ú Ïù¥Îèô
                setTimeout(() => {
                    document.getElementById('loginLoading').style.display = 'none';
                    showScreen('home');
                    document.getElementById('bottomNav').style.display = 'flex';
                    setupRoleCard();
                    setupResultScreen();
                    setupRealtimeListener(); // Ïã§ÏãúÍ∞Ñ Í∞êÏßÄ ÏãúÏûë
                }, 1000);

            } catch (error) {
                document.getElementById('loginLoading').style.display = 'none';
                alert(error.message);
                console.error('Î°úÍ∑∏Ïù∏ Ïò§Î•ò:', error);
            }
        }

        // FirebaseÏóêÏÑú ÏãúÌÅ¨Î¶ø ÏΩîÎìú ÏÉùÏÑ±
        async function generateSecretCodeFromFirebase(role) {
            try {
                const secretCodesDoc = await db.collection('gameSettings').doc('secretCodes').get();
                if (!secretCodesDoc.exists) {
                    // Í∏∞Î≥∏ ÏΩîÎìú ÏÇ¨Ïö©
                    return generateSecretCode(role);
                }
                
                const secretCodesData = secretCodesDoc.data();
                const codes = secretCodesData[role] || tempSecretCodes[role];
                
                // ÏÇ¨Ïö©ÎêòÏßÄ ÏïäÏùÄ ÏΩîÎìú Ï∞æÍ∏∞ (ÎÇòÏ§ëÏóê Íµ¨ÌòÑ)
                return codes[Math.floor(Math.random() * codes.length)];
            } catch (error) {
                console.error('ÏãúÌÅ¨Î¶ø ÏΩîÎìú ÏÉùÏÑ± Ïò§Î•ò:', error);
                return generateSecretCode(role);
            }
        }

        // Ïó≠Ìï† Ïπ¥Îìú ÏÑ§Ï†ï
        function setupRoleCard() {
            const roleInfo = roleDescriptions[gameState.role];
            const roleCard = document.getElementById('roleCard');
            
            roleCard.className = `role-card ${roleInfo.className}`;
            roleCard.innerHTML = `
                <div class="role-title">${roleInfo.title}</div>
                <div class="role-description">${roleInfo.description}</div>
                <div class="secret-code">
                    <div class="secret-code-label">ÎÇòÏùò ÏãúÌÅ¨Î¶ø ÏΩîÎìú</div>
                    <div class="secret-code-value">${gameState.secretCode}</div>
                </div>
            `;

            // Ïó≠Ìï† Ï†ïÎ≥¥ ÌôîÎ©¥ÎèÑ ÏóÖÎç∞Ïù¥Ìä∏
            document.getElementById('myRole').textContent = roleInfo.title;
            document.getElementById('mySecretCode').textContent = gameState.secretCode;
        }

        // ÌôîÎ©¥ Ï†ÑÌôò
        function showScreen(screenName) {
            // Î™®Îì† ÌôîÎ©¥ Ïà®Í∏∞Í∏∞
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });

            // ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò ÌôúÏÑ±Ìôî ÏÉÅÌÉú Î≥ÄÍ≤Ω
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });

            // ÏÑ†ÌÉùÎêú ÌôîÎ©¥ Î≥¥Ïù¥Í∏∞
            const screenMap = {
                'home': 'homeScreen',
                'role': 'roleScreen', 
                'codeInput': 'codeInputScreen',
                'result': 'resultScreen'
            };

            document.getElementById(screenMap[screenName]).classList.add('active');
            event.target.classList.add('active');
        }

        // ÏΩîÎìú Ï†úÏ∂ú - Firebase Ïó∞Îèô
        async function submitCode() {
            const targetCode = document.getElementById('targetCode').value.toUpperCase();
            
            if (!targetCode) {
                alert('ÏãúÌÅ¨Î¶ø ÏΩîÎìúÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
                return;
            }

            if (!gameState.isAlive) {
                alert('Í≤åÏûÑÏóêÏÑú Ï†úÏô∏ÎêòÏñ¥ ÏΩîÎìúÎ•º ÏûÖÎ†•Ìï† Ïàò ÏóÜÏäµÎãàÎã§.');
                return;
            }

            document.getElementById('codeLoading').style.display = 'block';

            try {
                // FirebaseÏóêÏÑú ÎåÄÏÉÅ ÌîåÎ†àÏù¥Ïñ¥ Ï∞æÍ∏∞
                const playersSnapshot = await db.collection('players')
                    .where('secretCode', '==', targetCode)
                    .get();
                
                if (playersSnapshot.empty) {
                    throw new Error('Ïú†Ìö®ÌïòÏßÄ ÏïäÏùÄ ÏãúÌÅ¨Î¶ø ÏΩîÎìúÏûÖÎãàÎã§.');
                }

                const targetPlayerDoc = playersSnapshot.docs[0];
                const targetPlayer = targetPlayerDoc.data();
                const targetPlayerId = targetPlayerDoc.id;

                // ÏûêÍ∏∞ ÏûêÏã†Ïùò ÏΩîÎìúÎäî ÏûÖÎ†• Î∂àÍ∞Ä
                if (targetPlayerId === gameState.player.loginCode) {
                    throw new Error('ÏûêÏã†Ïùò ÏãúÌÅ¨Î¶ø ÏΩîÎìúÎäî ÏûÖÎ†•Ìï† Ïàò ÏóÜÏäµÎãàÎã§.');
                }

                // ÎåÄÏÉÅÏù¥ Ïù¥ÎØ∏ Ï£ΩÏùÄ ÌîåÎ†àÏù¥Ïñ¥Ïù∏ÏßÄ ÌôïÏù∏
                if (!targetPlayer.isAlive) {
                    throw new Error('Ïù¥ÎØ∏ Í≤åÏûÑÏóêÏÑú Ï†úÏô∏Îêú ÌîåÎ†àÏù¥Ïñ¥Ïùò ÏΩîÎìúÏûÖÎãàÎã§.');
                }

                // ÏΩîÎìú Ï≤òÎ¶¨ Í≤∞Í≥º ÏÉùÏÑ±
                const result = await processSecretCodeWithFirebase(targetPlayer, targetPlayerId);
                
                setTimeout(() => {
                    document.getElementById('codeLoading').style.display = 'none';
                    displayCodeResult(result);
                    document.getElementById('targetCode').value = '';
                    setupResultScreen(); // Í≤∞Í≥º ÌôîÎ©¥ ÏóÖÎç∞Ïù¥Ìä∏
                }, 1000);

            } catch (error) {
                document.getElementById('codeLoading').style.display = 'none';
                alert(error.message);
                console.error('ÏΩîÎìú Ï†úÏ∂ú Ïò§Î•ò:', error);
            }
        }

        // FirebaseÏôÄ Ïó∞ÎèôÎêú ÏãúÌÅ¨Î¶ø ÏΩîÎìú Ï≤òÎ¶¨
        async function processSecretCodeWithFirebase(targetPlayer, targetPlayerId) {
            let result = {
                targetCode: targetPlayer.secretCode,
                targetRole: targetPlayer.role,
                timestamp: new Date().toLocaleString('ko-KR')
            };

            const myPlayerId = gameState.player.loginCode;

            switch (gameState.role) {
                case 'detective':
                    if (targetPlayer.role === 'merchant') {
                        result.type = 'clue';
                        result.title = 'ÏÉÅÏù∏Ïùò Ï¶ùÏñ∏';
                        result.content = generateMerchantTestimony();
                    } else if (targetPlayer.role === 'criminal') {
                        result.type = 'evidence';
                        result.title = 'Í≤∞Ï†ïÏ†Å Ï¶ùÍ±∞';
                        result.content = generateCriminalEvidence();
                    } else {
                        result.type = 'clue';
                        result.title = 'ÎèôÎ£å ÌÉêÏ†ï Ï†ïÎ≥¥';
                        result.content = 'ÎèôÎ£å ÌÉêÏ†ïÍ≥º Ï†ïÎ≥¥Î•º Í≥µÏú†ÌñàÏäµÎãàÎã§.';
                    }
                    break;

                case 'criminal':
                    // ÌòÑÏû¨ ÌÇ¨ Ïπ¥Ïö¥Ìä∏ ÌôïÏù∏
                    const myPlayerDoc = await db.collection('players').doc(myPlayerId).get();
                    const currentKillCount = myPlayerDoc.data().killCount || 0;
                    
                    if (currentKillCount >= 3) {
                        throw new Error('Ïù¥ÎØ∏ ÏµúÎåÄ Ï†úÍ±∞ ÌöüÏàò(3Ìöå)Ïóê ÎèÑÎã¨ÌñàÏäµÎãàÎã§.');
                    }

                    result.type = 'kill';
                    result.title = 'Ï†úÍ±∞ ÏòàÏïΩ';
                    result.content = `${targetPlayer.role === 'detective' ? 'ÌÉêÏ†ï' : targetPlayer.role === 'merchant' ? 'ÏÉÅÏù∏' : 'ÎåÄÏÉÅ'}ÏùÑ Ï†úÍ±∞ ÏòàÏïΩÌñàÏäµÎãàÎã§. 3Î∂Ñ ÌõÑ Í≤åÏûÑÏóêÏÑú Ï†úÏô∏Îê©ÎãàÎã§.`;
                    
                    // ÌÇ¨ Ïπ¥Ïö¥Ìä∏ Ï¶ùÍ∞Ä
                    await db.collection('players').doc(myPlayerId).update({
                        killCount: currentKillCount + 1
                    });

                    // 3Î∂Ñ ÌõÑ ÎåÄÏÉÅ ÌîåÎ†àÏù¥Ïñ¥ Ï†úÍ±∞
                    setTimeout(async () => {
                        try {
                            await db.collection('players').doc(targetPlayerId).update({
                                isAlive: false,
                                deathTime: firebase.firestore.FieldValue.serverTimestamp(),
                                killedBy: myPlayerId
                            });
                            console.log(`ÌîåÎ†àÏù¥Ïñ¥ ${targetPlayerId} Ï†úÍ±∞ ÏôÑÎ£å`);
                        } catch (error) {
                            console.error('ÌîåÎ†àÏù¥Ïñ¥ Ï†úÍ±∞ Ïò§Î•ò:', error);
                        }
                    }, 180000); // 3Î∂Ñ = 180,000ms
                    
                    break;

                case 'merchant':
                    result.type = 'money';
                    if (targetPlayer.role === 'merchant') {
                        result.amount = Math.floor(Math.random() * 100) + 1; // 1-100Ïõê
                    } else {
                        result.amount = Math.floor(Math.random() * 100) + 50; // 50-149Ïõê
                    }
                    result.title = 'Í±∞Îûò ÏÑ±Í≥µ';
                    result.content = `${result.amount}ÏõêÏùÑ ÌöçÎìùÌñàÏäµÎãàÎã§.`;
                    
                    // ÌîåÎ†àÏù¥Ïñ¥ Îèà ÏóÖÎç∞Ïù¥Ìä∏
                    const currentMoney = myPlayerDoc ? (myPlayerDoc.data().money || 0) : 0;
                    await db.collection('players').doc(myPlayerId).update({
                        money: currentMoney + result.amount
                    });
                    break;
            }

            // Í≤∞Í≥ºÎ•º FirebaseÏóê Ï†ÄÏû•
            await db.collection('players').doc(myPlayerId).update({
                results: firebase.firestore.FieldValue.arrayUnion(result)
            });

            // Î°úÏª¨ ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
            gameState.results.push(result);
            
            return result;
        }

        // ÏΩîÎìúÎ°ú Ïó≠Ìï† Ï∂îÏ†ï (ÏûÑÏãú)
        function getCodeRole(code) {
            if (code.startsWith('DT')) return 'detective';
            if (code.startsWith('CR')) return 'criminal';
            if (code.startsWith('MC')) return 'merchant';
            return null;
        }

        // ÏÉÅÏù∏ Ï¶ùÏñ∏ ÏÉùÏÑ±
        function generateMerchantTestimony() {
            const testimonies = [
                "Ïò§Îäò ÏïÑÏπ® ÏÇ¨Î¨¥Ïã§ Í∑ºÏ≤òÏóêÏÑú ÏàòÏÉÅÌïú ÏÇ¨ÎûåÏùÑ Î¥§Ïñ¥Ïöî.",
                "Ïñ¥Ï†ú Îä¶Í≤åÍπåÏßÄ ÎÇ®ÏïÑÏûàÎçò ÏÇ¨ÎûåÏù¥ ÏûàÏóàÎçò Í≤É Í∞ôÏïÑÏöî.",
                "Î≥µÏÇ¨Í∏∞ Í∑ºÏ≤òÏóêÏÑú Ïù¥ÏÉÅÌïú ÏÜåÎ¶¨Í∞Ä ÎÇ¨Ïñ¥Ïöî.",
                "ÎàÑÍµ∞Í∞Ä Îã§Î•∏ ÏÇ¨ÎûåÏùò Ï±ÖÏÉÅÏùÑ Îí§ÏßÄÍ≥† ÏûàÏóàÏñ¥Ïöî."
            ];
            return testimonies[Math.floor(Math.random() * testimonies.length)];
        }

        // Î≤îÏù∏ Ï¶ùÍ±∞ ÏÉùÏÑ±
        function generateCriminalEvidence() {
            const evidences = [
                "Î≤îÏù∏ÏùÄ ÏôºÏÜêÏû°Ïù¥Ïùº Í∞ÄÎä•ÏÑ±Ïù¥ ÎÜíÏäµÎãàÎã§.",
                "Î≤îÏù∏ÏùÄ IT Î∂ÄÏÑúÏôÄ Í¥ÄÎ†®Ïù¥ ÏûàÏùÑ Í≤ÉÏûÖÎãàÎã§.",
                "Î≤îÏù∏ÏùÄ ÏµúÍ∑º Ïä§Ìä∏Î†àÏä§Î•º ÎßéÏù¥ Î∞õÏùÄ ÏÇ¨ÎûåÏûÖÎãàÎã§.",
                "Î≤îÏù∏ÏùÄ ÌöåÏÇ¨ ÎÇ¥Î∂Ä Íµ¨Ï°∞Î•º Ïûò ÏïÑÎäî ÏÇ¨ÎûåÏûÖÎãàÎã§."
            ];
            return evidences[Math.floor(Math.random() * evidences.length)];
        }

        // ÏΩîÎìú Í≤∞Í≥º ÌëúÏãú
        function displayCodeResult(result) {
            const resultDiv = document.getElementById('codeResult');
            let html = `
                <div class="status-message">
                    <strong>${result.title}</strong><br>
                    ${result.content}
                </div>
            `;
            resultDiv.innerHTML = html;
        }

        // Í≤∞Í≥º ÌôîÎ©¥ ÏÑ§Ï†ï
        function setupResultScreen() {
            const resultContent = document.getElementById('resultContent');
            const resultTitle = document.getElementById('resultTitle');
            
            switch (gameState.role) {
                case 'detective':
                    resultTitle.textContent = 'üîç ÏàòÏßëÌïú Îã®ÏÑúÎì§';
                    displayDetectiveResults(resultContent);
                    break;
                case 'criminal':
                    resultTitle.textContent = 'üî™ Ï†úÍ±∞ Í∏∞Î°ù';
                    displayCriminalResults(resultContent);
                    break;
                case 'merchant':
                    resultTitle.textContent = 'üí∞ ÏàòÏùµ ÌòÑÌô©';
                    displayMerchantResults(resultContent);
                    break;
            }
        }

        // ÌÉêÏ†ï Í≤∞Í≥º ÌëúÏãú
        function displayDetectiveResults(container) {
            const clues = gameState.results.filter(r => r.type === 'clue' || r.type === 'evidence');
            
            if (clues.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666;">ÏïÑÏßÅ ÏàòÏßëÌïú Îã®ÏÑúÍ∞Ä ÏóÜÏäµÎãàÎã§.</p>';
                return;
            }

            let html = '<div class="result-list">';
            clues.forEach(clue => {
                html += `
                    <div class="result-item" onclick="showClueDetail('${clue.title}', '${clue.content}')">
                        <div class="result-item-title">${clue.title}</div>
                        <div class="result-item-subtitle">${clue.timestamp}</div>
                    </div>
                `;
            });
            html += '</div>';
            
            container.innerHTML = html;
        }

        // Î≤îÏù∏ Í≤∞Í≥º ÌëúÏãú
        function displayCriminalResults(container) {
            const kills = gameState.results.filter(r => r.type === 'kill');
            const remainingKills = 3 - kills.length;
            
            let html = `
                <div class="status-message">
                    ÎÇ®ÏùÄ Ï†úÍ±∞ Í∏∞Ìöå: ${remainingKills}Ìöå
                </div>
            `;

            if (kills.length === 0) {
                html += '<p style="text-align: center; color: #666;">ÏïÑÏßÅ Ï†úÍ±∞Ìïú ÎåÄÏÉÅÏù¥ ÏóÜÏäµÎãàÎã§.</p>';
            } else {
                html += '<div class="result-list">';
                kills.forEach(kill => {
                    html += `
                        <div class="result-item">
                            <div class="result-item-title">${kill.content}</div>
                            <div class="result-item-subtitle">${kill.timestamp}</div>
                            <button class="attack-btn" onclick="executeKill('${kill.targetCode}')">Í≥µÍ≤©</button>
                        </div>
                    `;
                });
                html += '</div>';
            }
            
            container.innerHTML = html;
        }

        // ÏÉÅÏù∏ Í≤∞Í≥º ÌëúÏãú
        function displayMerchantResults(container) {
            const transactions = gameState.results.filter(r => r.type === 'money');
            const totalMoney = transactions.reduce((sum, t) => sum + t.amount, 0);
            
            let html = `
                <div class="status-message">
                    Ï¥ù ÏàòÏùµ: ${totalMoney}Ïõê
                </div>
            `;

            if (transactions.length === 0) {
                html += '<p style="text-align: center; color: #666;">ÏïÑÏßÅ Í±∞Îûò Í∏∞Î°ùÏù¥ ÏóÜÏäµÎãàÎã§.</p>';
            } else {
                html += '<div class="result-list">';
                transactions.forEach(transaction => {
                    html += `
                        <div class="result-item">
                            <div class="result-item-title">Í±∞Îûò ÏôÑÎ£å</div>
                            <div class="result-item-subtitle">${transaction.timestamp}</div>
                            <div class="result-item-value">+${transaction.amount}Ïõê</div>
                        </div>
                    `;
                });
                html += '</div>';
            }
            
            container.innerHTML = html;
        }

        // Îã®ÏÑú ÏÉÅÏÑ∏ Î≥¥Í∏∞
        function showClueDetail(title, content) {
            alert(`${title}\n\n${content}`);
        }

        // Í≥µÍ≤© Ïã§Ìñâ
        function executeKill(targetCode) {
            if (confirm('Ï†ïÎßêÎ°ú Ïù¥ ÎåÄÏÉÅÏùÑ Ï†úÍ±∞ÌïòÏãúÍ≤†ÏäµÎãàÍπå? 3Î∂Ñ ÌõÑ ÎåÄÏÉÅÏù¥ Í≤åÏûÑÏóêÏÑú Ï†úÏô∏Îê©ÎãàÎã§.')) {
                // Ïã§Ï†úÎ°úÎäî FirebaseÏóêÏÑú Ìï¥Îãπ ÌîåÎ†àÏù¥Ïñ¥Ïùò ÏÉÅÌÉúÎ•º Î≥ÄÍ≤Ω
                alert('Ï†úÍ±∞ Î™ÖÎ†πÏù¥ Ïã§ÌñâÎêòÏóàÏäµÎãàÎã§. 3Î∂Ñ ÌõÑ ÎåÄÏÉÅÏù¥ Í≤åÏûÑÏóêÏÑú Ï†úÏô∏Îê©ÎãàÎã§.');
                
                // Î°úÏª¨ÏóêÏÑú Ï¶âÏãú Í≤∞Í≥º ÏóÖÎç∞Ïù¥Ìä∏
                setupResultScreen();
            }
        }

        // ÏÇ¨Îßù ÌÉÄÏù¥Î®∏ ÏãúÏûë
        function startDeathTimer() {
            gameState.isAlive = false;
            let timeLeft = 180; // 3Î∂Ñ = 180Ï¥à
            
            const timerDisplay = document.getElementById('timerDisplay');
            const deathTimer = document.getElementById('deathTimer');
            deathTimer.style.display = 'block';
            
            gameState.deathTimer = setInterval(() => {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                timerDisplay.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                timeLeft--;
                
                if (timeLeft < 0) {
                    clearInterval(gameState.deathTimer);
                    endGame();
                }
            }, 1000);
        }

        // Í≤åÏûÑ Ï¢ÖÎ£å
        function endGame() {
            alert('Í≤åÏûÑÏóêÏÑú Ï†úÏô∏ÎêòÏóàÏäµÎãàÎã§.');
            document.getElementById('bottomNav').style.display = 'none';
            document.getElementById('gameStatus').innerHTML = `
                <div class="status-message error">
                    Í≤åÏûÑÏóêÏÑú Ï†úÏô∏ÎêòÏóàÏäµÎãàÎã§. Îçî Ïù¥ÏÉÅ Ï∞∏Ïó¨Ìï† Ïàò ÏóÜÏäµÎãàÎã§.
                </div>
            `;
        }

        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ï¥àÍ∏∞Ìôî
        document.addEventListener('DOMContentLoaded', function() {
            // Î°úÍ∑∏Ïù∏ ÏΩîÎìú ÏûÖÎ†• Ïãú ÏûêÎèô ÎåÄÎ¨∏Ïûê Î≥ÄÌôò
            document.getElementById('loginCode').addEventListener('input', function(e) {
                e.target.value = e.target.value.toUpperCase();
            });
            
            // ÏãúÌÅ¨Î¶ø ÏΩîÎìú ÏûÖÎ†• Ïãú ÏûêÎèô ÎåÄÎ¨∏Ïûê Î≥ÄÌôò
            document.getElementById('targetCode').addEventListener('input', function(e) {
                e.target.value = e.target.value.toUpperCase();
            });
            
            // Enter ÌÇ§Î°ú Î°úÍ∑∏Ïù∏
            document.getElementById('playerPosition').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    login();
                }
            });
            
            // Enter ÌÇ§Î°ú ÏΩîÎìú Ï†úÏ∂ú
            document.getElementById('targetCode').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    submitCode();
                }
            });
        });

        // Firebase Ïó∞Îèô Ìï®ÏàòÎì§ (Ïã§Ï†ú Íµ¨ÌòÑ Ïãú ÏÇ¨Ïö©)
        
        // Firebase Ï¥àÍ∏∞Ìôî (Ïã§Ï†ú config ÌïÑÏöî)
        /*
        const firebaseConfig = {
            apiKey: "your-api-key",
            authDomain: "your-project.firebaseapp.com",
            databaseURL: "your-database-url",
            projectId: "your-project-id",
            storageBucket: "your-project.appspot.com",
            messagingSenderId: "your-sender-id",
            appId: "your-app-id"
        };
        
        // Firebase Ï¥àÍ∏∞Ìôî
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        */

        // Ïã§Ï†ú Î°úÍ∑∏Ïù∏ Ìï®Ïàò (Firebase ÏÇ¨Ïö©)
        /*
        async function loginWithFirebase(loginCode, playerName, playerPosition) {
            try {
                // Î°úÍ∑∏Ïù∏ ÏΩîÎìú Í≤ÄÏ¶ù
                const codeDoc = await db.collection('loginCodes').doc(loginCode).get();
                
                if (!codeDoc.exists || codeDoc.data().used) {
                    throw new Error('Ïú†Ìö®ÌïòÏßÄ ÏïäÍ±∞ÎÇò Ïù¥ÎØ∏ ÏÇ¨Ïö©Îêú ÏΩîÎìúÏûÖÎãàÎã§.');
                }
                
                // ÌîåÎ†àÏù¥Ïñ¥ Îì±Î°ù
                const playerData = {
                    name: playerName,
                    position: playerPosition,
                    role: codeDoc.data().role,
                    secretCode: generateSecretCode(codeDoc.data().role),
                    isAlive: true,
                    results: [],
                    loginTime: firebase.firestore.FieldValue.serverTimestamp()
                };
                
                await db.collection('players').doc(loginCode).set(playerData);
                
                // Î°úÍ∑∏Ïù∏ ÏΩîÎìú ÏÇ¨Ïö© ÌëúÏãú
                await db.collection('loginCodes').doc(loginCode).update({
                    used: true,
                    usedBy: playerName,
                    usedAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                return playerData;
                
            } catch (error) {
                throw error;
            }
        }
        */

        // Ïã§Ï†ú ÏΩîÎìú Ï†úÏ∂ú Ìï®Ïàò (Firebase ÏÇ¨Ïö©)
        /*
        async function submitCodeWithFirebase(targetCode) {
            try {
                // ÎåÄÏÉÅ ÌîåÎ†àÏù¥Ïñ¥ Ï∞æÍ∏∞
                const playersSnapshot = await db.collection('players')
                    .where('secretCode', '==', targetCode)
                    .get();
                
                if (playersSnapshot.empty) {
                    throw new Error('Ïú†Ìö®ÌïòÏßÄ ÏïäÏùÄ ÏãúÌÅ¨Î¶ø ÏΩîÎìúÏûÖÎãàÎã§.');
                }
                
                const targetPlayer = playersSnapshot.docs[0].data();
                const targetPlayerId = playersSnapshot.docs[0].id;
                
                // Í≤∞Í≥º Ï≤òÎ¶¨
                const result = await processCodeResult(gameState.role, targetPlayer.role);
                
                // ÎÇ¥ Í≤∞Í≥º Ï†ÄÏû•
                await db.collection('players').doc(gameState.player.loginCode).update({
                    results: firebase.firestore.FieldValue.arrayUnion(result)
                });
                
                // Î≤îÏù∏Ïùò Í≥µÍ≤©Ïù∏ Í≤ΩÏö∞ ÎåÄÏÉÅ ÌîåÎ†àÏù¥Ïñ¥ ÏÉÅÌÉú Î≥ÄÍ≤Ω
                if (gameState.role === 'criminal') {
                    setTimeout(async () => {
                        await db.collection('players').doc(targetPlayerId).update({
                            isAlive: false,
                            deathTime: firebase.firestore.FieldValue.serverTimestamp()
                        });
                    }, 180000); // 3Î∂Ñ ÌõÑ
                }
                
                return result;
                
            } catch (error) {
                throw error;
            }
        }
        */

        // Ïã§ÏãúÍ∞Ñ ÏÉÅÌÉú Í∞êÏßÄ - Firebase Î¶¨Ïä§ÎÑà
        function setupRealtimeListener() {
            // ÎÇ¥ ÌîåÎ†àÏù¥Ïñ¥ ÏÉÅÌÉú Ïã§ÏãúÍ∞Ñ Í∞êÏßÄ
            db.collection('players').doc(gameState.player.loginCode)
                .onSnapshot((doc) => {
                    if (doc.exists) {
                        const data = doc.data();
                        
                        // ÏÇ¨Îßù Ï≤òÎ¶¨
                        if (!data.isAlive && gameState.isAlive) {
                            gameState.isAlive = false;
                            showDeathMessage();
                            startDeathTimer();
                        }
                        
                        // Í≤∞Í≥º ÏóÖÎç∞Ïù¥Ìä∏ (Îã§Î•∏ Í∏∞Í∏∞ÏóêÏÑú Î°úÍ∑∏Ïù∏Ìïú Í≤ΩÏö∞ ÎèôÍ∏∞Ìôî)
                        if (data.results && data.results.length !== gameState.results.length) {
                            gameState.results = data.results;
                            setupResultScreen();
                        }
                    }
                });
        }

        // ÏÇ¨Îßù Î©îÏãúÏßÄ ÌëúÏãú
        function showDeathMessage() {
            const gameStatus = document.getElementById('gameStatus');
            gameStatus.innerHTML = `
                <div class="status-message error">
                    ‚ö†Ô∏è Î≤îÏù∏ÏóêÍ≤å Ï†úÍ±∞ÎêòÏóàÏäµÎãàÎã§! 3Î∂Ñ ÌõÑ Í≤åÏûÑÏóêÏÑú ÏôÑÏ†ÑÌûà Ï†úÏô∏Îê©ÎãàÎã§.
                </div>
            `;
        }
    </script>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
    
    <script>
        // Firebase ÏÑ§Ï†ï
        const firebaseConfig = {
            apiKey: "AIzaSyAxw0xYVu-rvRxOCLInMkqIJeuRIt35qU4",
            authDomain: "ncc2-c4bfa.firebaseapp.com",
            projectId: "ncc2-c4bfa",
            storageBucket: "ncc2-c4bfa.firebasestorage.app",
            messagingSenderId: "386144165760",
            appId: "1:386144165760:web:09492a8eed4a1b710deb65"
        };
        
        // Firebase Ï¥àÍ∏∞Ìôî
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        
        console.log('Firebase Ïó∞Í≤∞ ÏôÑÎ£å');
    </script>
</body>
</html>
